{
  "description": "Test samples for Customer Import API",
  "base_url": "YOUR_SUPABASE_URL/functions/v1/import-customers",
  "authentication": {
    "note": "Configure credentials in Settings > Customer Import API Authentication",
    "basic_auth": "username:password (configured in UI)",
    "bearer_token": "Your Supabase auth token (optional)"
  },
  "samples": {
    "single_customer_minimal": {
      "description": "Minimal customer with required fields only",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST001",
            "name": "Acme Corporation",
            "type": "Commercial",
            "segment": "General"
          }
        ]
      }
    },
    "single_customer_complete": {
      "description": "Complete customer with all optional fields",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST002",
            "name": "Department of Defense - Pentagon",
            "type": "Government",
            "segment": "Federal",
            "contract_number": "GS-07F-0001Y",
            "payment_terms": "Net 30",
            "currency": "USD",
            "tier": "Gold",
            "sales_manager": "Jane Smith",
            "sales_rep": "John Doe"
          }
        ]
      }
    },
    "customer_with_single_address": {
      "description": "Customer with one shipping address",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST003",
            "name": "US Air Force Base",
            "type": "Government",
            "segment": "Military",
            "addresses": [
              {
                "site_use_id": "SITE001",
                "address_line_1": "1670 Air Force Pentagon",
                "city": "Washington",
                "state": "DC",
                "postal_code": "20330",
                "country": "USA",
                "is_shipping": true,
                "is_billing": false,
                "is_primary": true,
                "is_credit_hold": false
              }
            ]
          }
        ]
      }
    },
    "customer_with_multiple_addresses": {
      "description": "Customer with shipping, billing, and warehouse locations",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST004",
            "name": "Boeing Defense Systems",
            "type": "Commercial",
            "segment": "Aerospace",
            "payment_terms": "Net 45",
            "addresses": [
              {
                "site_use_id": "BOEING-HQ",
                "address_line_1": "100 N Riverside Plaza",
                "city": "Chicago",
                "state": "IL",
                "postal_code": "60606",
                "country": "USA",
                "is_shipping": false,
                "is_billing": true,
                "is_primary": true,
                "is_credit_hold": false
              },
              {
                "site_use_id": "BOEING-WH1",
                "address_line_1": "5301 Bolsa Avenue",
                "city": "Huntington Beach",
                "state": "CA",
                "postal_code": "92647",
                "country": "USA",
                "is_shipping": true,
                "is_billing": false,
                "is_primary": false,
                "is_credit_hold": false,
                "primary_warehouse": "WH-CA-01",
                "second_warehouse": "WH-CA-02",
                "third_warehouse": "WH-NV-01"
              },
              {
                "site_use_id": "BOEING-WH2",
                "address_line_1": "499 Boeing Boulevard",
                "city": "Mesa",
                "state": "AZ",
                "postal_code": "85212",
                "country": "USA",
                "is_shipping": true,
                "is_billing": false,
                "is_primary": false,
                "is_credit_hold": false,
                "primary_warehouse": "WH-AZ-01"
              }
            ]
          }
        ]
      }
    },
    "customer_with_contacts": {
      "description": "Customer with primary and secondary contacts",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST005",
            "name": "Lockheed Martin Aeronautics",
            "type": "Commercial",
            "segment": "Defense",
            "contacts": [
              {
                "first_name": "Sarah",
                "last_name": "Johnson",
                "email": "sarah.johnson@lockheedmartin.com",
                "phone": "+1-817-777-2000",
                "title": "Procurement Manager",
                "department": "Supply Chain",
                "is_primary": true,
                "notes": "Primary contact for all aerospace components"
              },
              {
                "first_name": "Michael",
                "last_name": "Chen",
                "email": "michael.chen@lockheedmartin.com",
                "phone": "+1-817-777-2001",
                "title": "Senior Buyer",
                "department": "Procurement",
                "is_primary": false,
                "notes": "Backup contact, handles urgent orders"
              },
              {
                "first_name": "Emily",
                "last_name": "Rodriguez",
                "email": "emily.rodriguez@lockheedmartin.com",
                "phone": "+1-817-777-2002",
                "title": "Quality Assurance Lead",
                "department": "Quality",
                "is_primary": false
              }
            ]
          }
        ]
      }
    },
    "customer_complete_with_all_data": {
      "description": "Complete customer record with addresses and contacts",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST006",
            "name": "Raytheon Technologies",
            "type": "Commercial",
            "segment": "Defense Electronics",
            "contract_number": "FA8621-18-C-0001",
            "payment_terms": "Net 60",
            "currency": "USD",
            "tier": "Platinum",
            "sales_manager": "David Wilson",
            "sales_rep": "Lisa Martinez",
            "addresses": [
              {
                "site_use_id": "RTN-HQ",
                "address_line_1": "870 Winter Street",
                "city": "Waltham",
                "state": "MA",
                "postal_code": "02451",
                "country": "USA",
                "is_shipping": false,
                "is_billing": true,
                "is_primary": true,
                "is_credit_hold": false
              },
              {
                "site_use_id": "RTN-FAC1",
                "address_line_1": "1151 East Hermans Road",
                "city": "Tucson",
                "state": "AZ",
                "postal_code": "85756",
                "country": "USA",
                "is_shipping": true,
                "is_billing": false,
                "is_primary": false,
                "is_credit_hold": false,
                "primary_warehouse": "WH-AZ-03",
                "second_warehouse": "WH-AZ-04",
                "third_warehouse": "WH-TX-01"
              }
            ],
            "contacts": [
              {
                "first_name": "Robert",
                "last_name": "Anderson",
                "email": "robert.anderson@rtx.com",
                "phone": "+1-781-522-3000",
                "title": "Director of Procurement",
                "department": "Supply Chain",
                "is_primary": true,
                "notes": "Main decision maker for all purchases"
              },
              {
                "first_name": "Jennifer",
                "last_name": "Lee",
                "email": "jennifer.lee@rtx.com",
                "phone": "+1-520-794-1000",
                "title": "Facility Manager",
                "department": "Operations",
                "is_primary": false,
                "notes": "Contact for Tucson facility deliveries"
              }
            ]
          }
        ]
      }
    },
    "batch_import_multiple_customers": {
      "description": "Import multiple customers in a single API call",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST007",
            "name": "Northrop Grumman Systems",
            "type": "Commercial",
            "segment": "Aerospace",
            "payment_terms": "Net 45",
            "addresses": [
              {
                "address_line_1": "2980 Fairview Park Drive",
                "city": "Falls Church",
                "state": "VA",
                "postal_code": "22042",
                "country": "USA",
                "is_shipping": true,
                "is_billing": true,
                "is_primary": true
              }
            ],
            "contacts": [
              {
                "first_name": "Thomas",
                "last_name": "Wright",
                "email": "thomas.wright@ngc.com",
                "phone": "+1-703-280-2900",
                "title": "Supply Chain Director",
                "department": "Procurement",
                "is_primary": true
              }
            ]
          },
          {
            "customer_number": "CUST008",
            "name": "General Dynamics Corporation",
            "type": "Commercial",
            "segment": "Defense",
            "payment_terms": "Net 30",
            "addresses": [
              {
                "address_line_1": "11011 Sunset Hills Road",
                "city": "Reston",
                "state": "VA",
                "postal_code": "20190",
                "country": "USA",
                "is_shipping": true,
                "is_billing": true,
                "is_primary": true
              }
            ],
            "contacts": [
              {
                "first_name": "Patricia",
                "last_name": "Brown",
                "email": "patricia.brown@gd.com",
                "phone": "+1-703-876-3000",
                "title": "Purchasing Manager",
                "department": "Procurement",
                "is_primary": true
              }
            ]
          },
          {
            "customer_number": "CUST009",
            "name": "BAE Systems Inc",
            "type": "Commercial",
            "segment": "Electronics",
            "payment_terms": "Net 60",
            "tier": "Gold",
            "addresses": [
              {
                "address_line_1": "2941 Fairview Park Drive",
                "city": "Falls Church",
                "state": "VA",
                "postal_code": "22042",
                "country": "USA",
                "is_shipping": true,
                "is_billing": true,
                "is_primary": true
              }
            ],
            "contacts": [
              {
                "first_name": "James",
                "last_name": "Davis",
                "email": "james.davis@baesystems.com",
                "phone": "+1-703-668-1000",
                "title": "Senior Buyer",
                "department": "Supply Chain",
                "is_primary": true
              }
            ]
          }
        ]
      }
    },
    "single_customer_via_dedicated_endpoint": {
      "description": "Import single customer using dedicated endpoint",
      "method": "POST",
      "endpoint": "/import-customers/single",
      "body": {
        "customer_number": "CUST010",
        "name": "L3Harris Technologies",
        "type": "Commercial",
        "segment": "Communications",
        "contract_number": "W15P7T-19-D-0001",
        "payment_terms": "Net 45",
        "currency": "USD",
        "tier": "Gold",
        "addresses": [
          {
            "site_use_id": "L3H-HQ",
            "address_line_1": "1025 West NASA Boulevard",
            "city": "Melbourne",
            "state": "FL",
            "postal_code": "32919",
            "country": "USA",
            "is_shipping": true,
            "is_billing": true,
            "is_primary": true,
            "is_credit_hold": false
          }
        ],
        "contacts": [
          {
            "first_name": "Amanda",
            "last_name": "Taylor",
            "email": "amanda.taylor@l3harris.com",
            "phone": "+1-321-727-9100",
            "title": "Procurement Director",
            "department": "Supply Chain",
            "is_primary": true,
            "notes": "Primary contact for all communication systems orders"
          }
        ]
      }
    },
    "international_customer": {
      "description": "Customer with international address",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "customers": [
          {
            "customer_number": "CUST-UK-001",
            "name": "BAE Systems PLC",
            "type": "Commercial",
            "segment": "International Defense",
            "payment_terms": "Net 60",
            "currency": "GBP",
            "tier": "Platinum",
            "addresses": [
              {
                "site_use_id": "BAE-UK-HQ",
                "address_line_1": "Warwick House",
                "address_line_2": "PO Box 87",
                "address_line_3": "Farnborough Aerospace Centre",
                "city": "Farnborough",
                "state": "Hampshire",
                "postal_code": "GU14 6YU",
                "country": "United Kingdom",
                "is_shipping": true,
                "is_billing": true,
                "is_primary": true,
                "is_credit_hold": false
              }
            ],
            "contacts": [
              {
                "first_name": "Oliver",
                "last_name": "Thompson",
                "email": "oliver.thompson@baesystems.co.uk",
                "phone": "+44-1252-373232",
                "title": "Group Procurement Manager",
                "department": "Global Supply Chain",
                "is_primary": true
              }
            ]
          }
        ]
      }
    },
    "upsert_mode_update": {
      "description": "Update existing customer (upsert mode - default)",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "mode": "upsert",
        "customers": [
          {
            "customer_number": "CUST001",
            "name": "Acme Corporation - Updated",
            "type": "Commercial",
            "segment": "General",
            "payment_terms": "Net 45",
            "tier": "Silver",
            "sales_rep": "Updated Rep Name"
          }
        ]
      }
    },
    "insert_mode_only": {
      "description": "Insert only mode (fails if customer exists)",
      "method": "POST",
      "endpoint": "/import-customers",
      "body": {
        "mode": "insert",
        "customers": [
          {
            "customer_number": "CUST-NEW-001",
            "name": "New Customer Only",
            "type": "Commercial",
            "segment": "General"
          }
        ]
      }
    }
  },
  "curl_examples": {
    "basic_auth": {
      "description": "Import with Basic Authentication",
      "command": "curl -X POST 'YOUR_SUPABASE_URL/functions/v1/import-customers' \\\n  -u 'your_username:your_password' \\\n  -H 'Content-Type: application/json' \\\n  -d @customer-import-sample.json"
    },
    "bearer_token": {
      "description": "Import with Bearer token (for internal use)",
      "command": "curl -X POST 'YOUR_SUPABASE_URL/functions/v1/import-customers' \\\n  -H 'Authorization: Bearer YOUR_SUPABASE_TOKEN' \\\n  -H 'Content-Type: application/json' \\\n  -d @customer-import-sample.json"
    },
    "no_auth": {
      "description": "Import without authentication (if disabled in settings)",
      "command": "curl -X POST 'YOUR_SUPABASE_URL/functions/v1/import-customers' \\\n  -H 'Content-Type: application/json' \\\n  -d @customer-import-sample.json"
    },
    "single_customer": {
      "description": "Import single customer with complete data",
      "command": "curl -X POST 'YOUR_SUPABASE_URL/functions/v1/import-customers/single' \\\n  -u 'your_username:your_password' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"customer_number\": \"CUST001\",\n    \"name\": \"Test Customer\",\n    \"type\": \"Commercial\",\n    \"segment\": \"General\",\n    \"addresses\": [{\n      \"address_line_1\": \"123 Main St\",\n      \"city\": \"Washington\",\n      \"postal_code\": \"20001\",\n      \"country\": \"USA\",\n      \"is_primary\": true\n    }],\n    \"contacts\": [{\n      \"first_name\": \"John\",\n      \"last_name\": \"Doe\",\n      \"email\": \"john.doe@example.com\",\n      \"is_primary\": true\n    }]\n  }'"
    },
    "delete_all": {
      "description": "Delete all customers (use with caution!)",
      "command": "curl -X DELETE 'YOUR_SUPABASE_URL/functions/v1/import-customers/all?confirm=yes-delete-all' \\\n  -u 'your_username:your_password'"
    }
  },
  "response_examples": {
    "success": {
      "success": true,
      "message": "Successfully imported 3 customer(s)",
      "imported": 3,
      "failed": 0
    },
    "partial_success": {
      "success": false,
      "message": "Imported 2 customer(s), 1 failed",
      "imported": 2,
      "failed": 1,
      "errors": [
        "Customer at index 2: Missing required field 'name'"
      ]
    },
    "auth_required": {
      "success": false,
      "message": "Authentication required. Please provide credentials."
    },
    "invalid_credentials": {
      "success": false,
      "message": "Invalid credentials"
    }
  },
  "field_requirements": {
    "customer": {
      "required": [
        "customer_number",
        "name",
        "type",
        "segment"
      ],
      "optional": [
        "contract_number",
        "payment_terms",
        "currency",
        "tier",
        "sales_manager",
        "sales_rep"
      ],
      "defaults": {
        "type": "Commercial",
        "segment": "General",
        "currency": "USD"
      }
    },
    "address": {
      "required": [
        "address_line_1",
        "city",
        "postal_code",
        "country"
      ],
      "optional": [
        "site_use_id",
        "address_line_2",
        "address_line_3",
        "state",
        "is_shipping",
        "is_billing",
        "is_primary",
        "is_credit_hold",
        "primary_warehouse",
        "second_warehouse",
        "third_warehouse",
        "fourth_warehouse",
        "fifth_warehouse"
      ],
      "defaults": {
        "is_shipping": false,
        "is_billing": false,
        "is_primary": false,
        "is_credit_hold": false
      }
    },
    "contact": {
      "required": [
        "first_name",
        "last_name",
        "email"
      ],
      "optional": [
        "phone",
        "title",
        "department",
        "is_primary",
        "notes"
      ],
      "defaults": {
        "is_primary": false
      }
    }
  },
  "notes": [
    "The 'mode' parameter can be 'upsert' (default) or 'insert'",
    "Upsert mode updates existing customers or creates new ones",
    "Insert mode only creates new customers and fails if they exist",
    "When upserting, existing addresses and contacts are replaced",
    "All text fields are automatically trimmed of whitespace",
    "Customer records are linked to addresses/contacts via customer_number",
    "Authentication can be toggled on/off in Settings UI",
    "Rate limiting applies when authentication is enabled"
  ]
}
